<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Cities Form</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
</head>
<body class="container my-5">
<h2 class="mb-4">Cities</h2>
<form id="cityForm" class="mb-4">
    <div class="mb-3 w-50">
        <input type="text" id="city" placeholder="Enter the city" required>&nbsp;&nbsp;&nbsp;&nbsp;
        <input type="text" id="newCity" placeholder="New City">
    </div>
    <div class ="mt-2 mb-3 ">
        <button type="button" class="btn btn-primary" name="addcity" id="addBtn" onclick="addCity(document.getElementById('city').value)">Add City</button>&nbsp;&nbsp;
        <button type="button" class="btn btn-primary" name="updatecity" id="updateBtn" onclick="editCity(document.getElementById('city').value,document.getElementById('newCity').value)">Update City</button>&nbsp;&nbsp;
        <button type="button" class="btn btn-primary" name="deletecity" id="deleteBtn" onclick="deleteCity(document.getElementById('city').value)">Delete City</button>&nbsp;&nbsp;
    </div>
</form>
<table id ="cityTableBody">
    <thead>
    <tr>
        <th>Cities</th>
    </tr>
    </thead>
    <tbody>
    </tbody>
</table>
<script>
    let form = document.getElementById('cityForm');
    let add = document.getElementById('addBtn');
    let update = document.getElementById('updateBtnBtn');
    let del = document.getElementById('deleteBtn');

    let cities = ["Delhi", "Udaipur", "Amritsar"];
    let i = 1;
    let editMode =-1;
    function displayCity(data) {
        const tBody = document.querySelector("#cityTableBody tbody");
        tBody.innerHTML = '';
        data.forEach((c) => {
            const row = document.createElement("tr");
            row.innerHTML = `<td>${i}. ${c}</td>`;
            i++;
            tBody.appendChild(row);
        });
        i=1;
    }

    function deleteCity(city){
        let index = cities.findIndex((c)=>c===city);
        if(index !== -1){
            cities.splice(index,1);
            displayCity(cities);
            clearForm();
        }
    }

    function addCity(city){
        if (city.trim().length < 3) {
            alert("City name too short");
            clearForm();
            return;
        }
        let newCity = cities.find((c)=>c===city);
        if(!newCity){
            cities.push(city);
            clearForm();
            displayCity(cities);
        }else{
            alert("city already exist");
            clearForm();
        }
    }

    function editCity(city,newCity){
        if(city.trim().length<3){
            alert("city name too short")
            clearForm();
            return;
        }
        if(newCity.trim().length<3){
            alert("new city name too short")
            clearForm();
            return;
        }
        let index = cities.indexOf(newCity);
        let index2 = cities.indexOf(city);
        if(index2===-1){
            alert("city doesnt exist to update");
            clearForm();
            return;
        }
        if(index === -1){
            cities.splice(index2,1,newCity);
            displayCity(cities);
            clearForm();
        }else{
            alert("index already exist");
            clearForm();
        }
    }
    function clearForm() {
        document.getElementById("city").value = "";
        document.getElementById("newCity").value = "";
        document.getElementById("city").classList.remove("is-valid", "is-invalid");
        document.getElementById("newCity").classList.remove("is-valid", "is-invalid");
    }
    displayCity(cities);
</script>
</body>
</html>